if(!Array.prototype.indexOf){Array.prototype.indexOf=function(c,d){var b,a;for(b=(d||0),a=this.length;b<a;b+=1){if(this[b]===c){return b}}return -1}}function stripOverviewCookiePath(c){var b=c.split("/"),a;for(a=b.length-1;a>=0;a-=1){if(a>4||!jQuery.isNumeric(b[a])){delete b[a]}else{break}}if(b.join("")!==""){c=b.join("/");while(c.charAt(c.length-1)==="/"){c=c.substr(0,c.length-1)}}return c}function setOverviewCookie(a,f){var e="overview_hidden",d=$.cookie(e),c=[],b=-1;a=stripOverviewCookiePath(a);if(d){c=JSON.parse(d)}b=c.indexOf(a);if(b!==-1){if(!f){c.splice(b,1)}}else{if(f){c.push(a)}}if(c.length>0){d=JSON.stringify(c)}else{d=null}$.cookie(e,d,{path:"/",secure:(window.location.protocol==="https:")})};
(function(a){a(".overview_wrapper").ready(function(){a(".overview_label a.toggle_button").click(function(b){b.preventDefault();var d=false,c;if(a(".overview_wrapper").css("display")==="none"){a(".overview_label").removeClass("off");a(".overview_label a.toggle_button").html("Hide Overview <i></i>")}else{a(".overview_label").addClass("off");a(".overview_label a.toggle_button").html("Show Overview <i></i>");d=true}a(".overview_wrapper.bill").slideToggle();if(d){c="closed"}else{c="open"}a(document).trigger("overviewStateChanged",c);setOverviewCookie(window.location.pathname,d)});a(".overview_toggle a").click(function(b){b.preventDefault();var c=false;if(a(".overview_wrapper").css("display")==="none"){a(".overview_toggle").removeClass("off");a(".overview_toggle a").text("Hide Overview")}else{a(".overview_toggle").addClass("off");a(".overview_toggle a").text("Show Overview");c=true}a(".overview_wrapper").slideToggle();setOverviewCookie(window.location.pathname,c)})})}(jQuery));
/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */
(function defineMustache(b,a){if(typeof exports==="object"&&exports&&typeof exports.nodeName!=="string"){a(exports)}else{if(typeof define==="function"&&define.amd){define(["exports"],a)}else{b.Mustache={};a(b.Mustache)}}}(this,function mustacheFactory(F){var x=Object.prototype.toString;var y=Array.isArray||function d(Q){return x.call(Q)==="[object Array]"};function u(Q){return typeof Q==="function"}function L(Q){return y(Q)?"array":typeof Q}function i(Q){return Q.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function J(R,Q){return R!=null&&typeof R==="object"&&(Q in R)}var o=RegExp.prototype.test;function c(R,Q){return o.call(R,Q)}var s=/\S/;function E(Q){return !c(s,Q)}var q={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function z(Q){return String(Q).replace(/[&<>"'`=\/]/g,function R(S){return q[S]})}var t=/\s*/;var C=/\s+/;var l=/\s*=/;var N=/\s*\}/;var r=/#|\^|\/|>|\{|&|=|!/;function e(aj,Y){if(!aj){return[]}var aa=[];var Z=[];var V=[];var ak=false;var ah=false;function ag(){if(ak&&!ah){while(V.length){delete Z[V.pop()]}}else{V=[]}ak=false;ah=false}var ac,X,ai;function W(al){if(typeof al==="string"){al=al.split(C,2)}if(!y(al)||al.length!==2){throw new Error("Invalid tags: "+al)}ac=new RegExp(i(al[0])+"\\s*");X=new RegExp("\\s*"+i(al[1]));ai=new RegExp("\\s*"+i("}"+al[1]))}W(Y||F.tags);var S=new a(aj);var T,R,ab,ae,U,Q;while(!S.eos()){T=S.pos;ab=S.scanUntil(ac);if(ab){for(var af=0,ad=ab.length;af<ad;++af){ae=ab.charAt(af);if(E(ae)){V.push(Z.length)}else{ah=true}Z.push(["text",ae,T,T+1]);T+=1;if(ae==="\n"){ag()}}}if(!S.scan(ac)){break}ak=true;R=S.scan(r)||"name";S.scan(t);if(R==="="){ab=S.scanUntil(l);S.scan(l);S.scanUntil(X)}else{if(R==="{"){ab=S.scanUntil(ai);S.scan(N);S.scanUntil(X);R="&"}else{ab=S.scanUntil(X)}}if(!S.scan(X)){throw new Error("Unclosed tag at "+S.pos)}U=[R,ab,T,S.pos];Z.push(U);if(R==="#"||R==="^"){aa.push(U)}else{if(R==="/"){Q=aa.pop();if(!Q){throw new Error('Unopened section "'+ab+'" at '+T)}if(Q[1]!==ab){throw new Error('Unclosed section "'+Q[1]+'" at '+T)}}else{if(R==="name"||R==="{"||R==="&"){ah=true}else{if(R==="="){W(ab)}}}}}Q=aa.pop();if(Q){throw new Error('Unclosed section "'+Q[1]+'" at '+S.pos)}return m(p(Z))}function p(V){var R=[];var T,Q;for(var S=0,U=V.length;S<U;++S){T=V[S];if(T){if(T[0]==="text"&&Q&&Q[0]==="text"){Q[1]+=T[1];Q[3]=T[3]}else{R.push(T);Q=T}}}return R}function m(V){var X=[];var U=X;var W=[];var R,T;for(var Q=0,S=V.length;Q<S;++Q){R=V[Q];switch(R[0]){case"#":case"^":U.push(R);W.push(R);U=R[4]=[];break;case"/":T=W.pop();T[5]=R[2];U=W.length>0?W[W.length-1][4]:X;break;default:U.push(R)}}return X}function a(Q){this.string=Q;this.tail=Q;this.pos=0}a.prototype.eos=function K(){return this.tail===""};a.prototype.scan=function O(S){var R=this.tail.match(S);if(!R||R.index!==0){return""}var Q=R[0];this.tail=this.tail.substring(Q.length);this.pos+=Q.length;return Q};a.prototype.scanUntil=function I(S){var R=this.tail.search(S),Q;switch(R){case -1:Q=this.tail;this.tail="";break;case 0:Q="";break;default:Q=this.tail.substring(0,R);this.tail=this.tail.substring(R)}this.pos+=Q.length;return Q};function M(R,Q){this.view=R;this.cache={".":this.view};this.parent=Q}M.prototype.push=function G(Q){return new M(Q,this)};M.prototype.lookup=function j(T){var R=this.cache;var V;if(R.hasOwnProperty(T)){V=R[T]}else{var U=this,W,S,Q=false;while(U){if(T.indexOf(".")>0){V=U.view;W=T.split(".");S=0;while(V!=null&&S<W.length){if(S===W.length-1){Q=J(V,W[S])}V=V[W[S++]]}}else{V=U.view[T];Q=J(U.view,T)}if(Q){break}U=U.parent}R[T]=V}if(u(V)){V=V.call(this.view)}return V};function k(){this.cache={}}k.prototype.clearCache=function A(){this.cache={}};k.prototype.parse=function v(S,R){var Q=this.cache;var T=Q[S];if(T==null){T=Q[S]=e(S,R)}return T};k.prototype.render=function B(T,Q,S){var U=this.parse(T);var R=(Q instanceof M)?Q:new M(Q);return this.renderTokens(U,R,S,T)};k.prototype.renderTokens=function n(X,Q,V,Z){var T="";var S,R,Y;for(var U=0,W=X.length;U<W;++U){Y=undefined;S=X[U];R=S[0];if(R==="#"){Y=this.renderSection(S,Q,V,Z)}else{if(R==="^"){Y=this.renderInverted(S,Q,V,Z)}else{if(R===">"){Y=this.renderPartial(S,Q,V,Z)}else{if(R==="&"){Y=this.unescapedValue(S,Q)}else{if(R==="name"){Y=this.escapedValue(S,Q)}else{if(R==="text"){Y=this.rawValue(S)}}}}}}if(Y!==undefined){T+=Y}}return T};k.prototype.renderSection=function w(S,Q,V,Y){var Z=this;var U="";var W=Q.lookup(S[1]);function R(aa){return Z.render(aa,Q,V)}if(!W){return}if(y(W)){for(var T=0,X=W.length;T<X;++T){U+=this.renderTokens(S[4],Q.push(W[T]),V,Y)}}else{if(typeof W==="object"||typeof W==="string"||typeof W==="number"){U+=this.renderTokens(S[4],Q.push(W),V,Y)}else{if(u(W)){if(typeof Y!=="string"){throw new Error("Cannot use higher-order sections without the original template")}W=W.call(Q.view,Y.slice(S[3],S[5]),R);if(W!=null){U+=W}}else{U+=this.renderTokens(S[4],Q,V,Y)}}}return U};k.prototype.renderInverted=function b(S,R,Q,U){var T=R.lookup(S[1]);if(!T||(y(T)&&T.length===0)){return this.renderTokens(S[4],R,Q,U)}};k.prototype.renderPartial=function H(S,R,Q){if(!Q){return}var T=u(Q)?Q(S[1]):Q[S[1]];if(T!=null){return this.renderTokens(this.parse(T),R,Q,T)}};k.prototype.unescapedValue=function g(R,Q){var S=Q.lookup(R[1]);if(S!=null){return S}};k.prototype.escapedValue=function D(R,Q){var S=Q.lookup(R[1]);if(S!=null){return F.escape(S)}};k.prototype.rawValue=function f(Q){return Q[1]};F.name="mustache.js";F.version="2.2.1";F.tags=["{{","}}"];var P=new k();F.clearCache=function A(){return P.clearCache()};F.parse=function v(R,Q){return P.parse(R,Q)};F.render=function B(S,Q,R){if(typeof S!=="string"){throw new TypeError('Invalid template! Template should be a "string" but "'+L(S)+'" was given as the first argument for mustache#render(template, view, partials)')}return P.render(S,Q,R)};F.to_html=function h(T,R,S,U){var Q=F.render(T,R,S);if(u(U)){U(Q)}else{return Q}};F.escape=z;F.Scanner=a;F.Context=M;F.Writer=k}));
(function(a){if(!a.congress){a.congress={}}a.congress.DeepLink=function(c,b){var d=this;d.$el=a(c);d.options={};d.mostRecentBlock="";d.init=function(e){console.log("blat blat");d.options=a.extend({},d.options,e);d.$el.find("a").each(function(){d.wireUpSection(this)});a(".deep-link").hover(function(){d.mostRecentBlock=this;a(".deep-link-button").appendTo(this).css("display","inline");a(".deep-link-button").removeClass("link-copied").find("span").text("Share This")},function(){a(".deep-link-button").css("display","none")});a(".deep-link").focus(function(){d.mostRecentBlock=this;a(".deep-link-button").appendTo(this).css("display","inline");a(".deep-link-button").focus(function(){a(".deep-link-button").addClass("button-hover-state");a(d.mostRecentBlock).addClass("overlay-hover-state")})});a("#dlcl").click(d.handleCopyClick);a(".deep-link-button").on("mouseleave focusout",function(){a(this).removeClass("link-copied").find("span").text("Share This");a(".deep-link").removeClass("overlay-hover-state")});a(".deep-link").on("mouseleave focusout",function(){a(".deep-link-button").removeClass("button-hover-state")})};d.handleCopyClick=function(){var f,e=window.location.href.replace(window.location.hash,"");if(d.mostRecentBlock){f=a(d.mostRecentBlock).prev().attr("id");d.copyToClipboard(e+"#"+f);a(".deep-link-button").addClass("link-copied").find("span").text("Link Copied");a(".deep-link-button").focus()}return false};d.copyToClipboard=function(e){var f=a("<input>");a("body").append(f);f.val(e).select();document.execCommand("copy");f.remove()};d.wireUpSection=function(h){var g=a(h).next(),i=a(h).attr("id"),f=i+"-content",e=false;while(!e){if(g.prop("tagName")==="P"){g.addClass(f);g=g.next()}else{e=true}}a("."+f).wrapAll('<div class="deep-link" tabindex="0"></div>')};d.init(b)};a.fn.congress_DeepLink=function(b){return this.each(function(){return new a.congress.DeepLink(this,b)})}}(jQuery));$().ready(function(){$(".generated-html-container").congress_DeepLink({})});
(function(a){if(!a.congress){a.congress={}}a.congress.DownloadCsv=function(c,b){var d=this;d.$downloadLink=a(c);d.$dialogDiv=null;d.getParamName=b.getParamName;d.getParamValue=b.getParamValue;d.maxDocuments=b.maxDocuments;d.legislativeSource=b.legislativeSource;d.numberOfSearchResults=b.numberOfSearchResults;d.templateFiles={confirmation:"/js/download-csv/templates/_confirmation.html"};d.templates={};d.getTemplate=function(e){return a.ajax({url:d.templateFiles[e],success:function(f){d.templates[e]=f}})};d.showDialog=function(e){if(e&&e.preventDefault){e.preventDefault()}d.$dialogDiv=a("#download-csv-dialog");if(d.$dialogDiv.length==0){d.$dialogDiv=a('<div autofocus id="download-csv-dialog"></div>');d.$dialogDiv.html(Mustache.to_html(d.templates.confirmation,{maxDocuments:d.maxDocuments}))}d.$dialogDiv.dialog({autoOpen:true,draggable:false,dialogClass:"congress-default-modal",modal:true,open:function(f,g){d.bind(d.$dialogDiv.find("button.download"),"click",d.download);d.bind(d.$dialogDiv.find("button.dialog-close"),"click",d.hideDialog);d.bind(".ui-widget-overlay","click",d.hideDialog)},close:function(f,g){d.hideDialog(f)},title:"Download these search results?"})};d.download=function(){var e=d.getDownloadUrl();d.doPageMetricsPlugin();window.open(e,"_self");d.$dialogDiv.dialog("close")};d.getDownloadUrl=function(){var h=encodeURI(d.getParamName),j=encodeURI(d.getParamValue),f=document.location.search.substr(1).split("&"),g=f.length,e;while(g--){e=f[g].split("=");if(e[0]==h){e[1]=j;f[g]=e.join("=");break}}if(g<0){f[f.length]=[h,j].join("=")}return document.location.origin+document.location.pathname+"?"+f.join("&")};d.doPageMetricsPlugin=function(){try{s.linkTrackVars="eVar5,eVar6";s.eVar5=d.legislativeSource;s.eVar6=d.numberOfSearchResults;s.tl(true,"o","Download Results");s.eVar5=s.eVar6=""}catch(e){}};d.hideDialog=function(e){if(e!=undefined){e.preventDefault()}d.$dialogDiv.dialog("close")};d.bind=function(e,g,f){if(typeof e=="string"){e=a(e)}e.off(g).on(g,f)};d.init=function(){a.when(d.getTemplate("confirmation")).then(function(e){d.bind(d.$downloadLink,"click",d.showDialog)},function(e){d.$downloadLink.parent().hide()})};d.init()};a.fn.congress_DownloadCsv=function(b){return this.each(function(){var c=new a.congress.DownloadCsv(this,b);a(this).data("congress.DownloadCsv",c)})}}(jQuery));
(function(a){if(!a.congress){a.congress={}}a.congress.AccountLink=function(c,b){var d=this;d.$el=a(c);d.options={accountLandingUrl:null,accountRegisterUrl:null,accountSignInUrl:null,alertsUrl:null,checkForUserUrl:null,debugging:false,logoutUrl:null,passwordResetUrl:null,savedSearchesUrl:null};d.templateFiles={disabled:"/js/account-link/templates/disabled.html",loggedInDialog:"/js/account-link/templates/loggedInDialog.html",loginLink:"/js/account-link/templates/loginLink.html",notLoggedInDialog:"/js/account-link/templates/notLoggedInDialog.html",usernameLink:"/js/account-link/templates/usernameLink.html"};d.templates={};d.getTemplate=function(e){return a.ajax({url:d.templateFiles[e],success:function(f){d.templates[e]=f}})};d.checkForUser=function(){return a.ajax({url:d.options.checkForUserUrl,cache:false})};d.init=function(e){d.options=a.extend({},d.options,e);a.when(d.checkForUser(),d.getTemplate("disabled"),d.getTemplate("loggedInDialog"),d.getTemplate("loginLink"),d.getTemplate("notLoggedInDialog"),d.getTemplate("usernameLink")).then(function(h,k,j,i,g,f){if(h[0].accountsEnabled!==true){d.accountsDisabled()}else{if(h[0].username){d.userIsLoggedIn(h[0].username,h[0].canCreateAlerts)}else{d.notLoggedIn()}}},function(h,k,j,i,g,f){d.accountsDisabled()})};d.accountsDisabled=function(){d.$el.html(Mustache.to_html(d.templates.disabled))};d.userIsLoggedIn=function(g,e){d.$el.html(Mustache.to_html(d.templates.usernameLink,{username:g}));var f=Mustache.to_html(d.templates.loggedInDialog,{accountLandingUrl:d.options.accountLandingUrl,alertsUrl:d.options.alertsUrl,canCreateAlerts:e,savedSearchesUrl:d.options.savedSearchesUrl,logoutUrl:d.options.logoutUrl});a(f).dialog({autoOpen:false,draggable:false,modal:true,dialogClass:"signed-in-box-wrapper",minHeight:"none",position:{my:"right top",at:"right bottom",of:a(".signed-in-link")},open:function(h,i){a(".ui-widget-overlay").click(function(j){j.preventDefault();a(".signed-in-box").dialog("close")})}});a(".signed-in-link").attr("href","#");a(".signed-in-link").click(function(i){var h;i.preventDefault();h=window.location.pathname+window.location.search;a.cookie("post-authentication-url",h,{path:"/",secure:(window.location.protocol==="https:")});a(".signed-in-box").dialog("open")});a(".signed-in-close-link").click(function(h){h.preventDefault();a(".signed-in-box").dialog("close")})};d.notLoggedIn=function(){d.$el.html(Mustache.to_html(d.templates.loginLink,{accountSignInUrl:d.options.accountSignInUrl}));var e=Mustache.to_html(d.templates.notLoggedInDialog,{accountSignInUrl:d.options.accountSignInUrl,accountRegisterUrl:d.options.accountRegisterUrl,currentUrl:window.location.href,debugging:d.options.debugging,passwordResetUrl:d.options.passwordResetUrl});a(e).dialog({autoOpen:false,draggable:false,modal:true,dialogClass:"sign-in-box-wrapper",position:{my:"right top",at:"right bottom",of:a(".sign-in-link")},open:function(f,g){setTimeout(function(){a("#loginemailaddress").focus()},1);a(".ui-widget-overlay").click(function(h){h.preventDefault();a(".sign-in-box").dialog("close")})}});a(".sign-in-link").attr("href","#");a(".sign-in-link").click(function(g){var f;g.preventDefault();f=window.location.pathname+window.location.search;a.cookie("post-authentication-url",f,{path:"/",secure:(window.location.protocol==="https:")});a(".sign-in-box").dialog("open")});a(".sign-in-close-link").click(function(f){f.preventDefault();a(".sign-in-box").dialog("close")})};d.init(b)};a.fn.congress_AccountLink=function(b){return this.each(function(){return new a.congress.AccountLink(this,b)})}}(jQuery));
(function(a){if(!a.congress){a.congress={}}a.congress.PreviousNext=function(c,b){var d=this;d.$el=a(c);d.options={params:null,route:null,overview:null,additional:null,checkUrl:null};d.templateFiles={links:"/js/previous-next/templates/links.html"};d.templates={};d.getTemplate=function(e){return a.ajax({url:d.templateFiles[e],success:function(f){d.templates[e]=f}})};d.checkForPreviousNext=function(){return a.ajax({url:d.options.checkUrl,data:{params:d.options.params,route:d.options.route,overview:d.options.overview,additional:d.options.additional},cache:false})};d.init=function(e){d.hideLinks();d.options=a.extend({},d.options,e);d.bootstrap();a(document).on("pageSortChanged",function(g,f){d.changeAdditionalParameter("pageSort",f)});a(document).on("overviewStateChanged",function(g,f){if(f==="closed"){d.changeOverview(true)}else{d.changeOverview(false)}});a(document).on("facetItemChanged",function(f,g){switch(g){case"facetItemActionCategoryMajorActions":d.changeParam("action","actions");break;case"facetItemActionCategoryAllActions":d.changeParam("action","all-actions-without-amendments");break;case"facetItemActionCategoryAllActionsIncludingFloorAmendments":d.changeParam("action","all-actions");break;default:break}})};d.bootstrap=function(){a.when(d.checkForPreviousNext(),d.getTemplate("links")).then(function(f,e){if(f[0].showLinks){if(f[0].quickSearch){a(window).trigger("previous-next-quick-search-results")}d.addLinksToDom(f[0]);d.setLinkPosition();d.showLinks();a(window).on("load scroll resize",d.setLinkPosition)}},function(f,e){d.hideLinks()})};d.addLinksToDom=function(e){d.$el.html(Mustache.to_html(d.templates.links,e))};d.setLinkPosition=function(){var h=".pn-left-container .pn-back, .pn-right-container .pn-next, .pn-right-container .pn-next-disabled, .pn-left-container .pn-previous, .pn-left-container .pn-previous-disabled",i=a("footer"),g=a(window),e=g.scrollTop(),f=e+g.height(),m=i.offset().top,j=f-m,k=(g.height()-j)/2,l;if(k<100){l=j+55}else{l=j+k}if(f>=m){a(h).css({bottom:l})}else{a(h).css({bottom:"50%"})}};d.hideLinks=function(){d.$el.css("display","none")};d.showLinks=function(){d.$el.css("display","block")};d.changeAdditionalParameter=function(e,f){if(!d.options.additional){d.options.additional={}}if(f){d.options.additional[e]=f}else{delete d.options.additional[e]}d.bootstrap()};d.changeOverview=function(e){d.options.overview=e;d.bootstrap()};d.changeParam=function(e,f){if(!d.options.params){d.options.params={}}if(f){d.options.params[e]=f}else{delete d.options.params[e]}d.bootstrap()};d.init(b)};a.fn.congress_PreviousNext=function(b){return this.each(function(){return new a.congress.PreviousNext(this,b)})}}(jQuery));
(function(a){if(!a.congress){a.congress={}}a.congress.LAC=function(c,b){var d=this;d.$el=a(c);d.options={checkUrl:null};d.lacCheck=function(e){return a.ajax({url:d.options.checkUrl,data:{lac:JSON.stringify(e)},cache:false})};d.init=function(g){d.options=a.extend({},d.options,g);var e=a(".lac[data-lac]"),f={};if(e.length){e.each(function(i,k){var h=a(k),j=h.attr("data-lac"),l=h.attr("data-tokens");if(!f[j]){f[j]=[]}if(!l){l=""}f[j].push(l)});a.when(d.lacCheck(f)).then(function(j){for(var i in j){var h=j[i];a('.lac[data-lac="'+i+'"]').each(function(l,m){var k=a(m);if(h[l]){k.replaceWith(h[l])}else{k.remove()}})}},function(){e.each(function(h,i){a(i).remove()})})}};d.init(b)};a.fn.congress_LAC=function(b){return this.each(function(){return new a.congress.LAC(this,b)})}}(jQuery));
(function(a){if(!a.congress){a.congress={}}a.congress.ShareTool=function(c,b){var d=this;d.$el=a(c);d.surveyContentUrl=b.surveyContentUrl;d.logClickUrl=b.logClickUrl;d.logClickAppId=b.logClickAppId;d.citationFooter=b.citationFooterMsg;d.templateFiles={citation:"/js/share-tool/templates/citation.html",subscribe:"/js/share-tool/templates/subscribe.html",share:"/js/share-tool/templates/share.html",survey:"/js/share-tool/templates/survey.html"};d.subscribeDialog;d.shareDialog;d.surveyDialog;d.citationDialog;d.dialogWidth="510px";d.getTemplate=function(e){return a.ajax({url:d.templateFiles[e]})};d.print=function(e){e.preventDefault();d.closeSubscribeDialog();d.closeShareDialog();d.closeSurveyDialog();d.closeCitationDialog();window.print()};d.citation=function(e){e.preventDefault();d.logClick("view_citation");d.closeShareDialog();d.closeSurveyDialog();d.closeSubscribeDialog();if(!d.citationDialog){a.when(d.getTemplate("citation")).then(function(f){d.citationDialog=a(Mustache.to_html(f,{footerMessage:d.citationFooter})).dialog({draggable:false,resizable:false,width:d.dialogWidth,dialogClass:"locshare-dialog locshare-subscribe-arrow",position:d.getDialogPositionConfig(d.getCitationLink()),open:function(g,h){a(this).find("a.locshare-dialog-close").off("click").on("click",function(i){i.preventDefault();d.citationDialog.dialog("close")});a(this).find("#locshare_copy_bb").off("click").on("click",d.citeBBFormat);a(this).find("#locshare_copy_apa").off("click").on("click",d.citeAPAFormat);a(this).find("#locshare_copy_mla").off("click").on("click",d.citeMLAFormat);a(this).find("#locshare_copy_cmos").off("click").on("click",d.citeCMOSFormat)},close:function(g,h){d.getCitationLink().focus()}})},function(f){})}else{d.citationDialog.dialog("open").dialog("option","position",d.getDialogPositionConfig(d.getCitationLink()))}};d.subscribe=function(e){e.preventDefault();d.logClick("view_subscribe");d.closeShareDialog();d.closeSurveyDialog();d.closeCitationDialog();if(!d.subscribeDialog){a.when(d.getTemplate("subscribe")).then(function(f){d.subscribeDialog=a(f).dialog({draggable:false,resizable:false,width:d.dialogWidth,dialogClass:"locshare-dialog locshare-subscribe-arrow",position:d.getDialogPositionConfig(d.getSubscribeLink()),open:function(g,h){a(this).find("a.locshare-dialog-close").off("click").on("click",function(i){i.preventDefault();d.subscribeDialog.dialog("close")})},close:function(g,h){d.getSubscribeLink().focus()}})},function(f){})}else{d.subscribeDialog.dialog("open").dialog("option","position",d.getDialogPositionConfig(d.getSubscribeLink()))}};d.share=function(e){e.preventDefault();d.logClick("view_save_share");d.closeSubscribeDialog();d.closeSurveyDialog();d.closeCitationDialog();if(!d.shareDialog){a.when(d.getTemplate("share")).then(function(f){d.shareDialog=a(Mustache.to_html(f,{pageTitle:encodeURIComponent(document.title),currentUrl:window.location.href})).dialog({draggable:false,resizable:false,width:d.dialogWidth,dialogClass:"locshare-dialog locshare-subscribe-arrow",position:d.getDialogPositionConfig(d.getShareLink()),open:function(g,h){a(this).find("a.locshare-dialog-close").off("click").on("click",function(i){i.preventDefault();d.shareDialog.dialog("close")});a(this).find('a[href="#locshare/share/addfavorite"]').off("click").on("click",d.saveToMyBrowserButtonClick);a(this).find("#locshare_email_submit").off("click").on("click",d.emailSubmitClick)},close:function(g,h){d.getShareLink().focus()}}).tabs()},function(f){})}else{d.shareDialog.dialog("open").dialog("option","position",d.getDialogPositionConfig(d.getShareLink()))}};d.saveToMyBrowserButtonClick=function(e){e.preventDefault();d.logClick("save_browser");if(window.sidebar&&window.sidebar.addPanel){window.sidebar.addPanel(document.title,window.location.href,"")}else{if(window.external&&("AddFavorite" in window.external)){window.external.AddFavorite(location.href,document.title)}else{if(window.opera&&window.print){this.title=document.title;return true}else{alert("Press "+(navigator.userAgent.toLowerCase().indexOf("mac")!=-1?"Command/Cmd":"CTRL")+" + D to bookmark this page.")}}}};d.emailSubmitClick=function(i){i.preventDefault();var k=d.shareDialog.find("#from_name"),f=k.val().replace(/[&\/\\#,+()$|~%.":*?<>{}!@^&*]/g,"").replace(/\s+/g," ").trim(),h=d.shareDialog.find("#locshare_from_name_error"),g=f+" has shared a link from the Library of Congress",j="%0D%0A",e=document.title+j+j+encodeURIComponent(window.location.href)+j+j;if(f==""){k.val("");k.addClass("locshare-error");h.css("display","block")}else{k.removeClass("locshare-error");h.css("display","none");window.location.href="mailto:?subject="+g+"&body="+e}};d.survey=function(e){e.preventDefault();d.closeSubscribeDialog();d.closeShareDialog();if(!d.surveyDialog){a.when(d.getSurveyContent(),d.getTemplate("survey")).then(function(g,f){d.surveyDialog=a(f[0].replace('<div class="locshare-dialog-loading"></div>',g[0])).dialog({draggable:false,resizable:false,width:d.dialogWidth,dialogClass:"locshare-dialog locshare-subscribe-arrow",position:d.getDialogPositionConfig(d.getSurveyLink()),open:function(h,i){a(this).find("a.locshare-dialog-close").off("click").on("click",function(j){j.preventDefault();d.surveyDialog.dialog("close")})},close:function(h,i){d.getSurveyLink().focus()}})},function(g,f){})}else{d.surveyDialog.dialog("open").dialog("option","position",d.getDialogPositionConfig(d.getSurveyLink()))}};d.closeCitationDialog=function(){if(d.citationDialog&&d.citationDialog.dialog("isOpen")){d.citationDialog.dialog("close")}};d.closeSubscribeDialog=function(){if(d.subscribeDialog&&d.subscribeDialog.dialog("isOpen")){d.subscribeDialog.dialog("close")}};d.closeShareDialog=function(){if(d.shareDialog&&d.shareDialog.dialog("isOpen")){d.shareDialog.dialog("close")}};d.closeSurveyDialog=function(){if(d.surveyDialog&&d.surveyDialog.dialog("isOpen")){d.surveyDialog.dialog("close")}};d.getSurveyContent=function(){return a.ajax({url:d.surveyContentUrl,cache:false})};d.getPrintLink=function(){return d.$el.find('a[href="#print"]')};d.getSubscribeLink=function(){return d.$el.find('a[href="#subscribe"]')};d.getShareLink=function(){return d.$el.find('a[href="#share"]')};d.getSurveyLink=function(){return d.$el.find('a[href="#survey"]')};d.getCitationLink=function(){return d.$el.find('a[href="#citation"]')};d.getDialogPositionConfig=function(e){return{my:"left top",at:"left bottom",of:e,collision:"flip none"}};d.logClick=function(e){a.ajax({url:d.logClickUrl,method:"POST",data:{action:e,app_id:d.logClickAppId,download_link_label:null,embed_detail:null,embed_type:null,link:window.location.href,object_type:"page",target:null,title:document.title},complete:function(f,g){}})};d.copyToClipboard=function(g){var e=document.createRange(),f=window.getSelection();f.removeAllRanges();var h=document.createElement("div");h.setAttribute("style","-webkit-user-select: text !important");h.textContent=g;document.body.appendChild(h);e.selectNodeContents(h);f.addRange(e);document.execCommand("copy");f.removeAllRanges();h.textContent="";document.body.removeChild(h)};d.copyToClipboardMLA=function(i){var e,m="",j="",h="",l="";e=document.createElement("div");e.id="divCopy";e.setAttribute("style","-webkit-user-select: text !important");m=e;e.attachShadow&&(m=e.attachShadow({mode:"open"}));var k=i.split("<i>Congress.gov</i>");j=document.createElement("span");j.setAttribute("style","font-style: italic;");j.innerText="Congress.gov";var f=document.createElement("span");f.append(k[0],j,k[1]);m.appendChild(f);document.body.appendChild(e);try{l=document.getSelection();if(l){l.removeAllRanges();h=document.createRange();h.selectNodeContents(f);l.addRange(h)}document.execCommand("copy");l.removeAllRanges();document.body.removeChild(e);m.removeChild(f)}catch(g){console.log(g);s}};d.collectCitationData=function(e){var h={};e=a.parseHTML(e);var g=document.querySelector("title");h.siteTitle=g?g.textContent:"";a.each(e,function(j,k){if(k.nodeName.toString().toLowerCase()=="meta"&&a(k).attr("name")!=null&&typeof a(k).attr("name")!="undefined"){switch(a(k).attr("name")){case"dc.title":h.title=a(k).attr("content");break;case"dc.date":h.date=a(k).attr("content");break;case"dc.number":h.number=a(k).attr("content");break;case"dc.congress":h.congress=a(k).attr("content");break;case"canonical":h.url=a(k).attr("content");break;default:break}}});if(!h.date){var f=new Date();h.date=f.getMonth()+1+"/"+f.getDate()+"/"+f.getFullYear()}return h};d.getMetaDataFromCurrentPage=function(){var f=null,e="";a.ajax({async:false,url:window.location.href,success:function(g){f=d.collectCitationData(g)},error:function(g){console.log("Unable to retrieve webpage source HTML"+g.errors)}});return f};d.formatCitationData=function(h,i){var g="";var j=h.title.trim();var f=j.slice(-1);switch(i){case"locshare_copy_bb":g=(f!=".")?j:j.slice(0,-1);g+=h.number?", "+h.number:"";g+=h.congress?", "+h.congress:"";g+=h.date?" ("+new Date(h.date).getFullYear()+")":"";g+=h.url?", "+h.url+".":".";break;case"locshare_copy_apa":g=(f!=".")?j:j.slice(0,-1);var e=h.date?new Date(h.date):"";if(e){g+=". ("+e.getFullYear()+", "+e.toLocaleString("default",{month:"long"})+" "+e.getDate()+"). "}g+=h.url?h.url:"";break;case"locshare_copy_mla":g='"';g+=(f!=".")?j:j.slice(0,-1);g+='."';g+=" <i>Congress.gov</i>, Library of Congress";var e=h.date?new Date(h.date):"";if(e){g+=", "+e.getDate()+" "+e.toLocaleString("default",{month:"long"})+" "+e.getFullYear()}g+=h.url?", "+h.url+".":".";break;case"locshare_copy_cmos":g='Congress.gov. "';g+=(f!=".")?j:j.slice(0,-1);g+='." ';var e=h.date?new Date(h.date):"";if(e){g+=e.toLocaleString("default",{month:"long"})+" "+e.getDate()+", "+e.getFullYear()}g+=h.url?". "+h.url+".":".";break;default:break}return g};d.citeBBFormat=function(g){g.preventDefault();var h="",e="";try{h=d.getMetaDataFromCurrentPage();e=d.formatCitationData(h,g.target.id);d.copyToClipboard(e)}catch(f){console.log(f)}};d.citeAPAFormat=function(g){g.preventDefault();var h="",e="";try{h=d.getMetaDataFromCurrentPage();e=d.formatCitationData(h,g.target.id);d.copyToClipboard(e)}catch(f){console.log(f)}};d.citeMLAFormat=function(g){g.preventDefault();var h="",e="";try{h=d.getMetaDataFromCurrentPage();e=d.formatCitationData(h,g.target.id);d.copyToClipboardMLA(e)}catch(f){console.log(f)}};d.citeCMOSFormat=function(g){g.preventDefault();var h="",e="";try{h=d.getMetaDataFromCurrentPage();e=d.formatCitationData(h,g.target.id);d.copyToClipboard(e)}catch(f){console.log(f)}};d.init=function(){d.getPrintLink().click(d.print);d.getSubscribeLink().click(d.subscribe);d.getShareLink().click(d.share);d.getSurveyLink().click(d.survey);d.getCitationLink().click(d.citation)};d.init()};a.fn.ShareTool=function(b){return this.each(function(){return new a.congress.ShareTool(this,b)})}}(jQuery));
(function(a){a.extend({UserPreferences:function(){this.initialize=function(){return this};this.set=function(b,c){return a.cookie(b,c,{path:"/",secure:(window.location.protocol==="https:")})};this.get=function(c,b){if(typeof a.cookie(c)==="undefined"){return b}return a.cookie(c)};return this.initialize()}})})(jQuery);
